\section{Event-B Models}
-- Notes on Event-B machine --

\subsection{HD2}
Ignore all values, focus only on the very abstract level. Don't have physical entities, like pumps that can be on or off.
HDM1 - Patient blood never goes below 1.


Fails at refinement 2. Can not clean the blood before giving it is pumped back to the patient.

HD3

HDM10
If bloodpump in on, the system increases its amount of blood currently inside the system.
Blood inside the system can be cleaned if the ultrafiltration pump is turned on and there is blood in the system.
Cleaned blood is removed from the system. IN real life it is returned to the patient. 

HDM100
For any reason, we may turn off the Blood pump

HDM1000
Can only turn on blood pump when the alarm is off.
Alarm can be turned on for any reason

HDM10000

Need a function that takes a SystemState and return its substates. Cleaning, connecting etc.
Added SystemPhaseCtx for the 3 system phases and new csystemPhase variable. Also added an event to change a the variable to different phases.
Added events that contains monitored variables that cause the blood pump to stop and activate an alarm. For now, the alarm is turned on and the BP can only be turned off when the alarm is on.


SystemPhaseCtx1
Added the SUBPHASES of the HD treatment. $$ SUBPHASE \in SystemPhases \longrightarrow SubPhases $$


SystemPhaseCtx1 + HD100000
Added SystemSubPhases to the machine that allows for changing of the software state, only forwards.

Subphases are given an order and they must follow the order when the system changes states.


HD10000000
BloodPump and requirements regarding the System state has been added. 


HD10000001
Added SAD events. Air volume limit, flow through the SAD. 













